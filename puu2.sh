#!/bin/bash
#Written by Kevin Ross (kmross)

#########################################################################
# Password Upload Utility v2 - Linux
# 
# Description:  Updated Password Upload Utility utilizing the REST API
#               instead of an outdated and restricted version of PACLI
#
# Created by:   Kevin Ross (kmross)
#
# 
################## WELCOME TO CYBERARK IMPACT 2017! #####################
#
# TODO:         Hire a real pl/py coder instead :-)
#               Get InfamousJoeG Drunk
#               Add Bulk Change Method
#               Add Additional Properties for non-Windows account
#               Safe Verification
#               Platform Verification
#               Error Handling Everywhere in the script
#               Parse logs from curl for error checking
#               Add logging to file
#
#########################################################################

#printf "\n            PUU2"
#printf "\n\n"
#printf "\nâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–„â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–„â–‘â–‘â–‘â–‘"
#printf "\nâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–Œâ–’â–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–„â–€â–’â–Œâ–‘â–‘â–‘"
#printf "\nâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–Œâ–’â–’â–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–„â–€â–’â–’â–’â–â–‘â–‘â–‘"
#printf "\nâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–â–„â–€â–’â–’â–€â–€â–€â–€â–„â–„â–„â–€â–’â–’â–’â–’â–’â–â–‘â–‘â–‘"
#printf "\nâ–‘â–‘â–‘â–‘â–‘â–„â–„â–€â–’â–‘â–’â–’â–’â–’â–’â–’â–’â–’â–’â–ˆâ–’â–’â–„â–ˆâ–’â–â–‘â–‘â–‘"
#printf "\nâ–‘â–‘â–‘â–„â–€â–’â–’â–’â–‘â–‘â–‘â–’â–’â–’â–‘â–‘â–‘â–’â–’â–’â–€â–ˆâ–ˆâ–€â–’â–Œâ–‘â–‘â–‘"
#printf "\nâ–‘â–‘â–â–’â–’â–’â–„â–„â–’â–’â–’â–’â–‘â–‘â–‘â–’â–’â–’â–’â–’â–’â–’â–€â–„â–’â–’â–Œâ–‘â–‘"
#printf "\nâ–‘â–‘â–Œâ–‘â–‘â–Œâ–ˆâ–€â–’â–’â–’â–’â–’â–„â–€â–ˆâ–„â–’â–’â–’â–’â–’â–’â–’â–ˆâ–’â–â–‘â–‘"
#printf "\nâ–‘â–â–‘â–‘â–‘â–’â–’â–’â–’â–’â–’â–’â–’â–Œâ–ˆâ–ˆâ–€â–’â–’â–‘â–‘â–‘â–’â–’â–’â–€â–„â–Œâ–‘"
#printf "\nâ–‘â–Œâ–‘â–’â–„â–ˆâ–ˆâ–„â–’â–’â–’â–’â–’â–’â–’â–’â–’â–‘â–‘â–‘â–‘â–‘â–‘â–’â–’â–’â–’â–Œâ–‘"
#printf "\nâ–€â–’â–€â–â–„â–ˆâ–„â–ˆâ–Œâ–„â–‘â–€â–’â–’â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–’â–’â–’â–â–‘"
#printf "\nâ–â–’â–’â–â–€â–â–€â–’â–‘â–„â–„â–’â–„â–’â–’â–’â–’â–’â–’â–‘â–’â–‘â–’â–‘â–’â–’â–’â–’â–Œ"
#printf "\nâ–â–’â–’â–’â–€â–€â–„â–„â–’â–’â–’â–„â–’â–’â–’â–’â–’â–’â–’â–’â–‘â–’â–‘â–’â–‘â–’â–’â–â–‘"
#printf "\nâ–‘â–Œâ–’â–’â–’â–’â–’â–’â–€â–€â–€â–’â–’â–’â–’â–’â–’â–‘â–’â–‘â–’â–‘â–’â–‘â–’â–’â–’â–Œâ–‘"
#printf "\nâ–‘â–â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–‘â–’â–‘â–’â–‘â–’â–’â–„â–’â–’â–â–‘â–‘"
#printf "\nâ–‘â–‘â–€â–„â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–‘â–’â–‘â–’â–‘â–’â–„â–’â–’â–’â–’â–Œâ–‘â–‘"
#printf "\nâ–‘â–‘â–‘â–‘â–€â–„â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–„â–„â–„â–€â–’â–’â–’â–’â–„â–€â–‘â–‘â–‘"
#printf "\nâ–‘â–‘â–‘â–‘â–‘â–‘â–€â–„â–„â–„â–„â–„â–„â–€â–€â–€â–’â–’â–’â–’â–’â–„â–„â–€â–‘â–‘â–‘â–‘â–‘"
#printf "\nâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–’â–’â–’â–’â–’â–’â–’â–’â–’â–’â–€â–€â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘"
#printf "\nMUCH PUU         VERY RESTFUL"

echo ""
echo ""
echo ""
echo ""
echo ""
echo ""
echo ""
echo ""
echo " [1m[38;5;65m                                                                                                                                wow[39m[0m"
echo ""
echo "[49m             [38;5;179mâ–„â–„ [1m[38;5;74m                                                                                                         most data[39m[0m"
echo "             [48;5;179m [48;5;172m [49;38;5;172mâ–„                    [38;5;186mâ–„[38;5;179mâ–„[38;5;178mâ–„[38;5;172mâ–„ [1m[38;5;130m                                      very cyberark[39m[0m"
echo "             [48;5;179m [48;5;172m [48;5;136m [49mâ–„                 [38;5;187mâ–„[48;5;186;38;5;179mâ–„[48;5;179;38;5;142mâ–„[48;5;136m [38;5;130mâ–„[48;5;130;38;5;94mâ–„[48;5;179;38;5;136mâ–„[49m"
echo "             [48;5;179;38;5;178mâ–„[48;5;172m [48;5;136;38;5;130mâ–„[48;5;172m [48;5;179;38;5;172mâ–„[49;38;5;179mâ–„              â–„[48;5;179;38;5;136mâ–„[48;5;136m [48;5;137mâ–„[48;5;136m [48;5;130m   [49m"
echo "            [38;5;179mâ–„[48;5;178;38;5;136mâ–„[48;5;172m [48;5;136;38;5;178mâ–„â–„[48;5;172mâ–„â–„[48;5;179mâ–„[49mâ–„â–„[38;5;179mâ–„â–„      [38;5;186mâ–„[38;5;172mâ–„[48;5;178;38;5;136mâ–„[48;5;136;38;5;130mâ–„ â–„[48;5;130m [48;5;94m  [48;5;130m  [49m"
echo "           [38;5;179mâ–„[48;5;178mâ–„â–„[48;5;179m   [48;5;178m  [38;5;172mâ–„     [38;5;179mâ–„  [38;5;172mâ–„[48;5;172;38;5;130mâ–„[38;5;136mâ–„[48;5;136;38;5;130mâ–„[48;5;94m [48;5;130;38;5;136mâ–„ [48;5;94;38;5;52mâ–„[48;5;88;38;5;233mâ–„[48;5;52mâ–„[48;5;88;38;5;94mâ–„[48;5;130m  [49m [1m[38;5;173m                                                    so csv[39m[0m"
echo "         [38;5;179mâ–„[38;5;185mâ–„[48;5;179m [38;5;186mâ–„[48;5;186m [48;5;179mâ–„  [48;5;178;38;5;172mâ–„[48;5;172m  [38;5;178mâ–„[48;5;178m  [48;5;179m â–„â–„[48;5;178m   [48;5;172mâ–„[48;5;130;38;5;136mâ–„[48;5;88;38;5;130mâ–„[48;5;130m [48;5;136m â–„[48;5;94;38;5;232mâ–„[48;5;16m [48;5;233;38;5;52mâ–„[48;5;94;38;5;130mâ–„[48;5;136m [48;5;130;38;5;136mâ–„[49m [1m[38;5;95m                                         much restful[39m[0m"
echo "       [38;5;186mâ–„[48;5;186m [48;5;185mâ–„[48;5;179m  [48;5;186m   [48;5;179m [38;5;178mâ–„[48;5;172;38;5;136mâ–„ [48;5;178m [38;5;179mâ–„â–„[48;5;179m  [48;5;142mâ–„[48;5;178mâ–„     [48;5;172mâ–„[48;5;130;38;5;172mâ–„[38;5;94mâ–„[48;5;52;38;5;16mâ–„[48;5;16m [38;5;52mâ–„[48;5;94;38;5;136mâ–„[48;5;136m   [49m"
echo "     [38;5;186mâ–„[48;5;186m  [38;5;179mâ–„[48;5;179;38;5;100mâ–„[48;5;186;38;5;94mâ–„[48;5;180;38;5;137mâ–„[38;5;179mâ–„[48;5;186;38;5;180mâ–„[48;5;180;38;5;179mâ–„[48;5;179;38;5;178mâ–„[48;5;172;38;5;136mâ–„[48;5;136m  [48;5;179m [38;5;186mâ–„[48;5;180m  [48;5;179m [48;5;143;38;5;179mâ–„[48;5;136m  [48;5;178;38;5;136mâ–„ [38;5;179mâ–„[48;5;179m  [48;5;178mâ–„[48;5;172;38;5;178mâ–„[48;5;94mâ–„[38;5;136mâ–„[48;5;130mâ–„[48;5;136m [48;5;94;38;5;130mâ–„[38;5;136mâ–„[49;38;5;172mâ–„"
echo "   [38;5;186mâ–„[48;5;186;38;5;223mâ–„[48;5;222;38;5;224mâ–„[48;5;223;38;5;230mâ–„[48;5;186;38;5;187mâ–„[48;5;137;38;5;144mâ–„[48;5;235;38;5;233mâ–„[48;5;16m  [48;5;137;38;5;136mâ–„[48;5;179m  [48;5;178;38;5;179mâ–„[48;5;172mâ–„[48;5;136mâ–„[48;5;179m [48;5;180mâ–„  [38;5;143mâ–„[48;5;179;38;5;137mâ–„  [48;5;172;38;5;178mâ–„[38;5;136mâ–„[48;5;178;38;5;172mâ–„ [38;5;179mâ–„[48;5;179m    [48;5;178mâ–„[48;5;172;38;5;178mâ–„[48;5;136m [48;5;130m [38;5;88mâ–„[48;5;136;38;5;130mâ–„[49m [1m[38;5;47m                so much program[39m[0m"
echo "   [48;5;186;38;5;187mâ–„[48;5;224;38;5;254mâ–„[48;5;254m [48;5;224;38;5;223mâ–„[48;5;187;38;5;186mâ–„[48;5;144;38;5;137mâ–„[48;5;16;38;5;58mâ–„â–„[38;5;179mâ–„[48;5;179m      [38;5;172mâ–„[38;5;136mâ–„[48;5;143;38;5;52mâ–„[48;5;100;38;5;232mâ–„[48;5;58;38;5;244mâ–„[48;5;16m  [48;5;94;38;5;16mâ–„[48;5;136;38;5;94mâ–„[48;5;178;38;5;136mâ–„ [38;5;179mâ–„[48;5;179m      [38;5;178mâ–„[48;5;178m [48;5;130;38;5;172mâ–„[48;5;88;38;5;130mâ–„[48;5;130m [48;5;178;38;5;172mâ–„[49m"
echo "  [48;5;187m [48;5;223;38;5;224mâ–„[48;5;254m â–„[48;5;186m [48;5;179m [38;5;186mâ–„â–„[38;5;185mâ–„ [38;5;186mâ–„â–„[48;5;186m [38;5;179mâ–„[48;5;179m  [48;5;136;38;5;172mâ–„[48;5;58;38;5;136mâ–„[48;5;16m [48;5;59;38;5;232mâ–„[48;5;237;38;5;235mâ–„[48;5;16m  [38;5;58mâ–„[48;5;52;38;5;143mâ–„[48;5;136;38;5;179mâ–„[48;5;179m [38;5;180mâ–„â–„      [48;5;178;38;5;179mâ–„ [48;5;136;38;5;172mâ–„â–„[48;5;178m [49m"
echo " [38;5;187mâ–„[48;5;187;38;5;223mâ–„[48;5;254;38;5;253mâ–„[48;5;253m [48;5;187;38;5;224mâ–„[48;5;223;38;5;253mâ–„[48;5;222;38;5;144mâ–„[38;5;143mâ–„[48;5;186mâ–„[38;5;144mâ–„[38;5;180mâ–„[48;5;180m [48;5;186m   [48;5;179m  [48;5;178;38;5;179mâ–„â–„[48;5;137mâ–„[48;5;94mâ–„[48;5;95;38;5;143mâ–„[48;5;58mâ–„[48;5;101;38;5;179mâ–„[48;5;143mâ–„[48;5;180mâ–„ [48;5;186;38;5;187mâ–„[48;5;187m [48;5;186mâ–„ [38;5;180mâ–„[48;5;180;38;5;186mâ–„[48;5;186m [48;5;180mâ–„ [48;5;179m [48;5;178;38;5;179mâ–„ [48;5;172;38;5;178mâ–„[48;5;178m [48;5;179mâ–„[49m"
echo "[38;5;180mâ–„[48;5;187m [48;5;223;38;5;187mâ–„[48;5;187m [38;5;230mâ–„[38;5;243mâ–„[48;5;238;38;5;16mâ–„[48;5;235mâ–„[48;5;236mâ–„[48;5;238mâ–„[48;5;235mâ–„[48;5;58mâ–„[48;5;144;38;5;233mâ–„[48;5;186;38;5;187mâ–„â–„â–„[48;5;180;38;5;186mâ–„[48;5;179;38;5;180mâ–„  [38;5;186mâ–„â–„â–„ [38;5;180mâ–„â–„â–„[48;5;186m [48;5;187m   [48;5;186;38;5;187mâ–„[48;5;180mâ–„[48;5;186mâ–„   [48;5;180m [48;5;179m  [48;5;178m [38;5;179mâ–„â–„[48;5;180mâ–„[49m [1m[38;5;157m                                     such web scale[39m[0m"
echo "[48;5;180;38;5;187mâ–„[48;5;187;38;5;223mâ–„  [48;5;254;38;5;187mâ–„[48;5;102;38;5;241mâ–„[48;5;16m       [48;5;144;38;5;248mâ–„[48;5;187m  [48;5;186;38;5;187mâ–„ [48;5;180m [38;5;186mâ–„[48;5;186m [48;5;187m    [48;5;186;38;5;187mâ–„â–„[48;5;187m  [38;5;186mâ–„â–„â–„â–„[48;5;186m [38;5;180mâ–„â–„â–„[48;5;180m [38;5;179mâ–„[48;5;179;38;5;178mâ–„[48;5;178m  [38;5;179mâ–„[48;5;179m [49m [1m[38;5;70m               very much passwords[39m[0m"
echo "[48;5;187;38;5;186mâ–„   [48;5;250;38;5;144mâ–„[48;5;101;38;5;95mâ–„[48;5;16;38;5;232mâ–„    [38;5;238mâ–„[48;5;241;38;5;102mâ–„[48;5;145;38;5;144mâ–„[48;5;144m [38;5;180mâ–„[38;5;186mâ–„[48;5;180m [48;5;179m [48;5;180m [48;5;186;38;5;187mâ–„[48;5;187m  [38;5;186mâ–„    â–„â–„â–„[48;5;186;38;5;180mâ–„[48;5;180m [38;5;179mâ–„ â–„[48;5;179m   [48;5;172;38;5;136mâ–„[48;5;136;38;5;172mâ–„[48;5;178m  [48;5;179;38;5;178mâ–„ [49m"
echo "[48;5;186m [48;5;187m   [48;5;144m [48;5;59;38;5;95mâ–„[48;5;235;38;5;233mâ–„[48;5;16m  [38;5;232mâ–„â–„[48;5;238;38;5;58mâ–„[48;5;102;38;5;101mâ–„[48;5;138;38;5;144mâ–„[48;5;144m [38;5;143mâ–„[48;5;179mâ–„  [48;5;180;38;5;179mâ–„    [48;5;186;38;5;180mâ–„â–„[48;5;180m    [38;5;179mâ–„ [48;5;179;38;5;180mâ–„â–„[48;5;180m  [38;5;179mâ–„[48;5;179m [48;5;178;38;5;142mâ–„[48;5;136m  [48;5;178m [38;5;136mâ–„ [49m [1m[38;5;159m                                                                                    beautiful doge[39m[0m"
echo "[48;5;186m [48;5;187m    [48;5;137;38;5;144mâ–„[48;5;16;38;5;58mâ–„     [48;5;94;38;5;16mâ–„[48;5;137;38;5;58mâ–„[48;5;143;38;5;101mâ–„â–„[38;5;94mâ–„[38;5;58mâ–„[38;5;52mâ–„[48;5;137;38;5;58mâ–„[48;5;143m [48;5;180;38;5;143mâ–„ [38;5;179mâ–„[48;5;179m [38;5;180mâ–„[48;5;180m   [48;5;179mâ–„[48;5;180m [38;5;186mâ–„[48;5;186m  [48;5;180mâ–„ [38;5;179mâ–„[48;5;179m [48;5;178m [48;5;136;38;5;172mâ–„[48;5;178mâ–„[48;5;172m [38;5;178mâ–„[48;5;178m [49m"
echo " [48;5;187m   [48;5;186;38;5;187mâ–„ [48;5;143;38;5;180mâ–„[48;5;58;38;5;137mâ–„[48;5;232;38;5;94mâ–„[48;5;16mâ–„â–„â–„â–„[38;5;58mâ–„â–„[48;5;232;38;5;94mâ–„[48;5;16mâ–„[48;5;232;38;5;100mâ–„[48;5;58;38;5;136mâ–„[48;5;101;38;5;143mâ–„[48;5;143;38;5;180mâ–„[48;5;179mâ–„  [48;5;180m          [38;5;179mâ–„â–„[48;5;179m [48;5;178;38;5;172mâ–„[48;5;136m  [48;5;172;38;5;136mâ–„[48;5;136m [48;5;172mâ–„[49m"
echo "[38;5;223mâ–„[48;5;223m [48;5;187m  [38;5;186mâ–„[48;5;186m  [48;5;180mâ–„[48;5;137;38;5;180mâ–„[48;5;100;38;5;179mâ–„[48;5;137mâ–„â–„[48;5;143mâ–„[48;5;137mâ–„â–„[48;5;136mâ–„[48;5;137mâ–„[48;5;143mâ–„[48;5;179m        [48;5;180m[38;5;186mâ–„  [38;5;179mâ–„â–„[48;5;179m [38;5;178mâ–„[48;5;178;38;5;172mâ–„[48;5;172;38;5;136mâ–„[48;5;178;38;5;172mâ–„[48;5;136mâ–„  [49m [1m[38;5;171m                                                                          wow[39m[0m"
echo " [48;5;223m  [48;5;187;38;5;186mâ–„â–„[48;5;186m   [38;5;180mâ–„â–„[48;5;179m        [48;5;143;38;5;179mâ–„â–„[48;5;179;38;5;143mâ–„[48;5;143;38;5;179mâ–„[48;5;179m [38;5;180mâ–„[48;5;180m    [48;5;186mâ–„[48;5;180m  [38;5;179mâ–„[48;5;179m  [38;5;178mâ–„[48;5;172mâ–„[48;5;136;38;5;172mâ–„[48;5;172;38;5;136mâ–„â–„[48;5;136;38;5;130mâ–„ [49m"
echo "  [38;5;223mâ–€[48;5;186m [38;5;179mâ–„[38;5;180mâ–„  [48;5;180m [38;5;179mâ–„[48;5;179m  [48;5;180mâ–„[48;5;179m   [48;5;143mâ–„[48;5;179m      [48;5;180m   [48;5;186;38;5;180mâ–„[48;5;180m [38;5;179mâ–„[48;5;179m [38;5;180mâ–„   [48;5;178;38;5;179mâ–„ [48;5;136;38;5;172mâ–„  [48;5;130;38;5;136mâ–„[49mâ–€"
echo "    [38;5;180mâ–€[48;5;179;38;5;185mâ–„  [48;5;180;38;5;179mâ–„[48;5;179m           [48;5;143mâ–„[48;5;179m  [48;5;180mâ–„[48;5;179;38;5;143mâ–„[48;5;180;38;5;179mâ–„[48;5;179m   [38;5;180mâ–„[48;5;180;38;5;179mâ–„[48;5;179m    [48;5;178m [48;5;136;38;5;172mâ–„  [49m"
echo "      [38;5;179mâ–€â–€[48;5;179m    [38;5;142mâ–„  â–„[38;5;136mâ–„[38;5;142mâ–„[48;5;143mâ–„â–„â–„[38;5;136mâ–„ [38;5;142mâ–„[48;5;136;38;5;143mâ–„[48;5;143m [48;5;179;38;5;180mâ–„         [49;38;5;178mâ–€â–€"
echo "            [38;5;136mâ–€â–€[38;5;142mâ–€[38;5;136mâ–€â–€â–€â–€â–€[38;5;143mâ–€â–€â–€[38;5;179mâ–€[38;5;180mâ–€â–€[39m"
echo ""

printf "\n\n"


read -p "Enter the CyberArk URL (ie: https://components.cyberark.local) : " CAURL
read -p "Enter Your Name: " CAUsername
read -s -p "Enter Password: " CAPass
printf "\n"
read -p "Enter the path of the CSV file (ie: /home/user/cyberark.csv): " INPUT

printf "\n"
#login and get auth_key
curl --insecure -s -i -H "Accept: application/json" -H "Content-Type:application/json" -X POST --data '{"username":"'"$CAUsername"'", "password":"'"$CAPass"'"}' $CAURL/PasswordVault/WebServices/auth/Cyberark/CyberArkAuthenticationService.svc/Logon | sed -e ':a;N;$!ba;s/\n/ /g' | sed -e 's/.*\"\:\"\(.*\)\"}.*/\1/g' > auth.key

#add "authorization:" to head of file
sed -i '1s/^/authorization: /' ./auth.key

#set auth_key
AUTH=$(cat ./auth.key)
printf "\n--------------------------------------------------"
printf "\n\nYour CyberArk RestAPI Auth Token:\n\n"
echo "$AUTH"
printf "\n--------------------------------------------------\n\n"

#Process the file
OLDIFS=$IFS
IFS=,
[ ! -f $INPUT ] && { echo "$INPUT file not found"; exit 99; }

while read CYBRObjectName CYBRSafe CYBRAddress CYBRUsername CYBRPassword CYBRPlatformID CYBRDisableAutoMgmt CYBRDisableAutoMgmtReason
do
	echo "ObjectName : $CYBRObjectName"
	echo "Safe : $CYBRSafe"
	echo "Address : $CYBRAddress"
	echo "Username : $CYBRUsername"
	echo "Password : $CYBRPassword"
	echo "PlatformID : $CYBRPlatformID"
	echo "DisableAutoMgmt : $CYBRDisableAutoMgmt"
	echo "DisableAutoMgmtReason : $CYBRDisableAutoMgmtReason"

printf "\n--------------------------------------------------\n\n"
printf "Attempting to create your account.  Logs below:\n"
printf "\n--------------------------------------------------\n\n"

curl --insecure -s -i -H "$AUTH" -H "Content-Type:application/json" -X POST --data '{"account" : {"safe":"'"$CYBRSafe"'","platformID": "'"$CYBRPlatformID"'","address": "'"$CYBRAddress"'","accountName": "'"$CYBRObjectName"'","password": "'"CYBRPassword"'","username": "'"$CYBRUsername"'",}}' $CAURL/PasswordVault/WebServices/PIMServices.svc/Account | grep HTTP/1.1


done < $INPUT
IFS=$OLDIFS

#logoff_from_safe
curl --insecure -s -i -H "$AUTH" -d -H "Content-Type:application/json" -X POST $CAURL/PasswordVault/WebServices/auth/Cyberark/CyberArkAuthenticationService.svc/Logoff| grep HTTP/1.1
printf "\nLogged off\n"

# A little cleanup is needed
rm -rf ./auth.key
